<template name="assignmentAdd">
    <div class="modal fade" id="addContactableModal"  role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" name="addContactableModal">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                    <h4 class="modal-title" id="myModalLabel">Add Assignment

                    </h4>
                </div>

                <div class="modal-body">
                    <form role="form" class="form-horizontal">
                        <div class="form-group">
                            <label class="col-sm-2 control-label">Employee:</label>
                            <div class="col-sm-10">
                                <select class="form-control employeeSelect">
                                    <option value="null" selected="{{isSelected null}}">--select--</option>
                                    {{#each employees}}
                                        <option value="{{_id}}" selected="{{isSelected _id}}">{{displayName}}</option>
                                    {{/each}}
                                </select>
                            </div>
                        </div>
                        {{#with assignment}}
                            <div class="form-group">
                                <label class="col-sm-2 control-label">Start:</label>
                                <div class="col-sm-10 startDate">
                                    {{#dateTimePicker value=start}}
                                    {{/dateTimePicker}}
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-2 control-label">
                                    <div class="checkbox" style="padding-top: 0">
                                        <label class="control-label"><input type="checkbox" class="hasEnded"> End:</label>
                                    </div>
                                </div>
                                <div class="col-sm-10 endDate">
                                    {{#if end}}
                                        {{#dateTimePicker value=end}}
                                        {{/dateTimePicker}}
                                    {{else}}
                                        <label class="text-muted" style="margin-top: 7px;">No end date specified</label>
                                    {{/if}}
                                </div>
                            </div>
                            <hr/>
                            <h4 style="text-align: center">Rates</h4>
                            <table class="table table-striped">
                                <thead>
                                <tr style="font-weight: bold;">
                                    <td class="col-md-4">Type</td>
                                    <td class="col-md-2">Bill</td>
                                    <td class="col-md-2">Pay</td>
                                    <td class="col-md-1"></td>
                                </tr>
                                </thead>
                                <tbody>
                                {{#each rates}}
                                <tr>
                                    {{#with getType type}}
                                        <td title="{{description}}">{{displayName}}</td>
                                    {{/with}}
                                    <td><input type="number" class="billRateInput form-control" value="{{bill}}"></td>
                                    <td><input type="number" class="payRateInput form-control" value="{{pay}}"></td>
                                    <td><a class="btn btn-default removeRate">Remove</a></td>
                                </tr>
                                {{/each}}
                                <tr style="background-color: #B8B8B8;">
                                    {{#with newRate}}
                                        <td style="background-color: inherit;">
                                            <select class="form-control newRateType">
                                                <option value="null">--select--</option>
                                                {{#each getAvailableType}}
                                                    <option value="{{_id}}">{{displayName}}</option>
                                                {{/each}}
                                            </select>
                                        </td>
                                        <td style="background-color: inherit;"><input type="number" class="billRateInput form-control" value="{{bill}}"></td>
                                        <td style="background-color: inherit;"><input type="number" class="payRateInput form-control" value="{{pay}}"></td>
                                        <td style="background-color: inherit;"><a class="btn btn-primary addRate">Add</a></td>
                                    {{/with}}
                                </tr>
                                </tbody>
                            </table>
                        {{/with}}
                    </form>
                </div>
                <div class="modal-footer">
                    <a href="#" class="btn" data-dismiss="modal">Close</a>
                    <button class="btn btn-primary save">Save</button>
                </div>
            </div>
        </div>
    </div>
</template>
