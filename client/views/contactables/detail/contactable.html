<template name="contactable">
    <div class="contactable-page-details">
        <div id="content">
            {{#with contactable}}
                <div id="breadcrumb" class="breadcrumb-top">
                    <a href="#" title="Go to Home" class="tip-bottom">Home</a>
                    <a href="#" class="current">Contactables</a>
                </div>
                <div id="content-header" class="content-header-bottom">
                    <div class="profile-content-header">
                        {{#if pictureFileId}}
                            <div class="profile-pic">
                                <div class="thumb thumb-md profile-pic-photo"  style="cursor: pointer;">
                                    <a href="#" id="edit-pic" title="Click to Edit">
                                        <img class="" src="{{pictureUrl}}" style="max-height: 80px;max-width: 80px;">
                                    </a>
                                </div>
                            </div>
                        {{/if}}
                        <input id="edit-picture" style="visibility:hidden; display: none" name="files" type="file" class="fileUploader"/>

                        {{#if Customer}}
                            {{>customer_header}}
                        {{/if}}
                        {{#if Employee}}
                            {{>employee_header}}
                        {{/if}}
                        {{#if Contact }}
                            {{>contact_header}}
                        {{/if}}
                        <div class="profile-last-update">
                            Created at
                            <small>{{createdAtFormatted}}</small>
                        </div>
                    </div>
                </div>

                <!-- /.content-header -->
                <div class="container-fluid contactable-content">
                    <div class="row">
                        <!-- Left Column -->
                        <div class="col-sm-8 col-lg-5 contactable-left-col">
                            {{>customer_tabs}}
                        </div>

                        <!-- Right Column -->
                        <div class="col-sm-4 col-lg-7 contactable-right-col-custom has-tabs">
                            <div class="row">
                                <div class="col-lg-6">
                                    {{>contactableDetailBox}}
                                    {{>contactableLocationBox}}
                                </div><!-- /.col-md-6 -->

                                <div class="col-lg-6">
                                    <!-- Contacts -->
                                    {{>contactableContactsBox}}

                                    <!-- Tags -->
                                    {{>contactableTagsBox}}
                                </div><!-- /.col-md-6 -->
                            </div><!-- /.row -->
                        </div><!-- /.contactable-right-col -->
                        <!-- / Right Column -->

                    </div><!-- /.row -->
                </div><!-- /.container-fluid -->
            {{/with}}
        </div><!-- /.content -->
    </div>
</template>

<!-- Headers -->

<template name="customer_header">

    {{#if pictureFileId}}
    {{else}}
        <div class="profile-pic">
            <div id="edit-pic" class="profile-pic-icon" title="Click to Edit" style="cursor: pointer">
                {{#if person}}
                    <i class="icon-profile-bussiness-man"></i>
                {{/if}}
                {{#if organization}}
                    <i class="icon-buildings-1"></i>
                {{/if}}
            </div>
        </div>
    {{/if}}

    <h1 class="profile-name">
        <strong>{{displayName}}</strong>
        <small>{{Customer.department}}</small>
    </h1>
    <p class="profile-adress">
        <i class="fa fa-map-marker"></i>
        {{#if location}}
            <span>{{location.displayName}}</span>
        {{else}}
            <a class="addLocation" href="#">
                <em>Click here to add an address </em>
            </a>
        {{/if}}
    </p>

    <div class="profile-btns">
        {{#if firstCellPhone }}
        <a class="btn btn-default btn-custom-with-cyrcle" href="#">
            <span class="btn-round"><i class="fa fa-phone"></i></span>
            <span>{{firstCellPhone}}</span>
        </a>
        {{/if}}
        {{#if firstEmail }}
        <a class="btn btn-default btn-custom-with-cyrcle" href="#">
            <span class="btn-round"><i class="fa fa-envelope"></i></span>
            <span>{{firstEmail.value}}</span>
        </a>
        {{/if}}
        <!--<a class="btn btn-default btn-custom-with-cyrcle" href="#"-->
           <!--data-bind="click: function () { Composer.showModal( 'sendMessage',$data); }">-->
            <!--<span class="btn-round"><i class="fa fa-envelope"></i></span>-->
            <!--Message-->
        <!--</a>-->
        <!--<a class="btn btn-default btn-custom-with-cyrcle" href="#"-->
           <!--data-bind="click: function () { Composer.showModal('addContactable', 'Contact',{customer: $data._id()}); }">-->
            <!--<span class="btn-round"><i class="fa fa-plus"></i></span>-->
            <!--Add Contact Method-->
        <!--</a>-->
    </div>
</template>

<template name="contact_header">
    {{#if pictureFileId}}
    {{else}}
        <div class="profile-pic">
            <div id="edit-pic" class="profile-pic-icon" title="Click to Edit" style="cursor: pointer">
                {{#if person}}
                    <i class="icon-contact-book-2"></i>
                {{/if}}
                {{#if organization}}
                    <i class="icon-buildings-1"></i>
                {{/if}}
            </div>
        </div>
    {{/if}}

    <h1 class="profile-name">
        <strong>{{displayName}}</strong>
        {{#if person}}
            <small>— {{person.jobTitle}}</small>
        {{/if}}

        {{#if Contact.customerName}}
            <a class="pull-right" href="/contactable/{{Contact.customer}}">
                <i class="icon-buildings-1"></i>
                {{Contact.customerName}}
            </a>
        {{else}}
            <a class="pull-right editCustomer" href="#"> <i class="icon-buildings-1"></i> Link to a Customer</a>
        {{/if}}
    </h1>
    <p class="profile-adress">
        <i class="fa fa-map-marker"></i>
        {{#if location}}
            <span>{{location.displayName}}</span>
        {{else}}
            <em> Click here to add an address </em>
        {{/if}}
    </p>

    <div class="profile-btns">
        {{#if firstCellPhone }}
            <a class="btn btn-default btn-custom-with-cyrcle" href="#">
                <span class="btn-round"><i class="fa fa-phone"></i></span>
                <span>{{firstCellPhone}}</span>
            </a>
        {{/if}}
        {{#if firstEmail }}
            <a class="btn btn-default btn-custom-with-cyrcle" href="#">
                <span class="btn-round"><i class="fa fa-envelope"></i></span>
                <span>{{firstEmail.value}}</span>
            </a>
        {{/if}}
        <!--<a class="btn btn-default btn-custom-with-cyrcle" href="#"-->
        <!--data-bind="click: function () { Composer.showModal( 'sendMessage',$data); }">-->
        <!--<span class="btn-round"><i class="fa fa-envelope"></i></span>-->
        <!--Message-->
        <!--</a>-->
        <!--<a class="btn btn-default btn-custom-with-cyrcle" href="#"-->
        <!--data-bind="click: function () { Composer.showModal('addContactable', 'Contact',{customer: $data._id()}); }">-->
        <!--<span class="btn-round"><i class="fa fa-plus"></i></span>-->
        <!--Add Contact Method-->
        <!--</a>-->
    </div>
</template>

<template name="employee_header">
    {{#if pictureFileId}}
    {{else}}
        <div class="profile-pic">
            <div id="edit-pic" class="profile-pic-icon" title="Click to Edit" style="cursor: pointer">
                {{#if person}}
                <i class="icon-profile-man"></i>
                {{/if}}
                {{#if organization}}
                <i class="icon-buildings-1"></i>
                {{/if}}
            </div>
        </div>
    {{/if}}

    <h1 class="profile-name">
        <strong>{{displayName}}</strong>
        {{#if person}}
            <small>— {{person.jobTitle}}</small>
        {{/if}}
        {{#if assignmentInfo}}
            <a class="pull-right" href="/job/{{assignmentInfo._id}}">
                <i class="icon icon-briefcase"> <span>{{assignmentInfo.displayName}}</span></i>
            </a>
        {{/if}}
    </h1>
    <p class="profile-adress">
        <i class="fa fa-map-marker"></i>
        {{#if location}}
            <span>{{location.displayName}}</span>
        {{else}}
            <em> Click here to add an address </em>
        {{/if}}
    </p>

    <div class="profile-btns">
        {{#if firstCellPhone }}
        <a class="btn btn-default btn-custom-with-cyrcle" href="#">
            <span class="btn-round"><i class="fa fa-phone"></i></span>
            <span>{{firstCellPhone}}</span>
        </a>
        {{/if}}
        {{#if firstEmail }}
        <a class="btn btn-default btn-custom-with-cyrcle" href="#">
            <span class="btn-round"><i class="fa fa-envelope"></i></span>
            <span>{{firstEmail.value}}</span>
        </a>
        {{/if}}
        <!--<a class="btn btn-default btn-custom-with-cyrcle" href="#"-->
        <!--data-bind="click: function () { Composer.showModal( 'sendMessage',$data); }">-->
        <!--<span class="btn-round"><i class="fa fa-envelope"></i></span>-->
        <!--Message-->
        <!--</a>-->
        <!--<a class="btn btn-default btn-custom-with-cyrcle" href="#"-->
        <!--data-bind="click: function () { Composer.showModal('addContactable', 'Contact',{customer: $data._id()}); }">-->
        <!--<span class="btn-round"><i class="fa fa-plus"></i></span>-->
        <!--Add Contact Method-->
        <!--</a>-->
    </div>
</template>

<!-- Tabs -->

<template name="customer_tabs">
    <ul class="nav nav-tabs  contactable-nav-tabs-main bottom-20">
        <li class="active"><a href="#profile-notes" data-toggle="tab">Notes <span class="custom-badge-2">{{posts.length}}</span></a></li>
        <li><a href="#profile-documents" data-toggle="tab">Documents <span class="custom-badge-2">6</span></a></li>
    </ul>

    <div class="tab-content">
        <!-- Notes Tab -->
        <div class="tab-pane active" id="profile-notes">
            {{> contactableNotesAdd entity=.}}
            {{> contactableNotesList entity=.}}
        </div>
        <!-- Documents Tab -->
        <div class="tab-pane" id="profile-documents">
            {{> contactableDocumentsAdd entity=. collection="ContactablesFS"}}
            {{> contactableDocumentsList entity=. collection="ContactablesFS"}}
        </div><!-- /.profile-documents -->
    </div>
</template>

<template name="loadingContactable">
    <div id="content">
        <div id="content-header" class="mini">
            <h1>Dashboard</h1>
            <ul class="mini-stats box-3">
                <li>
                    <div class="left sparkline_bar_good"><span><canvas width="41" height="24" style="display: inline-block; width: 41px; height: 24px; vertical-align: top;"></canvas></span>+10%</div>
                    <div class="right">
                        <strong>36094</strong>
                        Visits
                    </div>
                </li>
                <li>
                    <div class="left sparkline_bar_neutral"><span><canvas width="47" height="24" style="display: inline-block; width: 47px; height: 24px; vertical-align: top;"></canvas></span>0%</div>
                    <div class="right">
                        <strong>1433</strong>
                        Users
                    </div>
                </li>
                <li>
                    <div class="left sparkline_bar_bad"><span><canvas width="41" height="24" style="display: inline-block; width: 41px; height: 24px; vertical-align: top;"></canvas></span>+50%</div>
                    <div class="right">
                        <strong>8650</strong>
                        Orders
                    </div>
                </li>
            </ul>
        </div>
        <div id="breadcrumb">
            <a href="#" title="" class="tip-bottom" data-original-title="Go to Home"><i class="fa fa-home"></i> Home</a>
            <a href="#" class="current">Dashboard</a>
        </div>
        <div class="container-fluid">

            <div class="page-loader" style="height: 748px;">

            </div><!-- /.page-loader -->

        </div><!-- /.container-fluid -->

    </div>
</template>