<template name="contactable">
    <div class="contactable-page-details">
        <div id="content">{{displayObjType}}
            {{#with contactable}}
                <div id="breadcrumb" class="breadcrumb-top">
                    <a href="#" title="Go to Home" class="tip-bottom">Home</a>
                    <a href="#" class="current">{{displayObjType}}</a>
                </div>
                <div id="content-header" class="content-header-bottom">
                    <div class="profile-content-header">
                        {{#if pictureFileId}}
                            <div class="profile-pic">
                                <div class="thumb thumb-md profile-pic-photo"  style="cursor: pointer;">
                                    <a href="#" id="edit-pic" title="Click to Edit">
                                        <img class="" src="{{pictureUrl}}" style="max-height: 40px;max-width: 40px;">
                                    </a>
                                </div>
                            </div>
                        {{/if}}
                        <input id="edit-picture" style="visibility:hidden; display: none" name="files" type="file" class="fileUploader"/>

                        {{#if Customer}}
                            {{>customer_header}}
                        {{/if}}
                        {{#if Employee}}
                            {{>employee_header}}
                        {{/if}}
                        {{#if Contact }}
                            {{>contact_header}}
                        {{/if}}
                        <div class="profile-btns">
                            {{#with mainContactMethods}}
                                {{#if phone.value}}
                                    <a class="btn btn-default btn-custom-with-circle" href="callto:{{phone.value}}">
                                        <span class="btn-round"><i class="fa fa-phone"></i></span>
                                        {{phone.value}}
                                    </a>
                                {{/if}}
                                {{#if email.value}}
                                    <a class="btn btn-default btn-custom-with-circle" href="mailto:{{phone.value}}">
                                        <span class="btn-round"><i class="fa fa-envelope"></i></span>
                                        {{email.value}}
                                    </a>
                                {{/if}}
                            {{/with}}
                            <a class="btn btn-default btn-custom-with-circle sendMessage" href="#">
                                <span class="btn-round"><i class="fa fa-envelope"></i></span>
                                Message
                            </a>
                        </div>
                    </div>
                </div>

                <!-- /.content-header -->
                <div class="container-fluid contactable-content">
                    <div class="row">
                        <!-- Left Column -->
                        <div class="col-sm-8 col-lg-5 contactable-left-col">
                            {{#if Customer}}
                                {{>customer_tabs contactable=. documentCount=documentCount jobCount=jobCount noteCount=noteCount}}
                            {{/if}}
                            {{#if Employee}}
                                {{>employee_tabs contactable=. documentCount=documentCount jobCount=jobCount noteCount=noteCount}}
                            {{/if}}
                            {{#if Contact}}
                                {{>contact_tabs contactable=. documentCount=documentCount noteCount=noteCount}}
                            {{/if}}
                        </div>

                        <!-- Right Column -->
                        <div class="col-sm-4 col-lg-7 contactable-right-col-custom has-tabs">
                            <div class="row">
                                <div class="col-lg-6">
                                    {{>contactableDetailBox}}

                                    {{>contactableContactMethodsBox}}

                                    {{>contactableLocationBox}}
                                </div><!-- /.col-md-6 -->

                                <div class="col-lg-6">
                                    <!-- Contacts -->
                                    {{>contactableContactsBox}}

                                    <!-- Tags -->
                                    {{>tagsBox}}

                                    <!-- Assignments -->
                                    {{>contactableAssignmentsBox}}


                                    <!--Customer-->
                                    {{#if Contact}}
                                        {{>customerInfo customer=Contact.customer path='Contact.customer' collection=ContactablesCollection}}
                                    {{/if}}
                                </div><!-- /.col-md-6 -->
                            </div><!-- /.row -->
                        </div><!-- /.contactable-right-col -->
                        <!-- / Right Column -->

                    </div><!-- /.row -->
                </div><!-- /.container-fluid -->
            {{/with}}
        </div><!-- /.content -->
    </div>
</template>

<!-- Headers -->

<template name="customer_header">

    {{#if pictureFileId}}
    {{else}}
        <div class="profile-pic">
            <div id="edit-pic" class="profile-pic-icon" title="Click to Edit" style="cursor: pointer">
                {{#if person}}
                    <i class="icon-profile-business-man"></i>
                {{/if}}
                {{#if organization}}
                    <i class="icon-buildings-1"></i>
                {{/if}}
            </div>
        </div>
    {{/if}}

    <h1 class="profile-name">
        <strong>{{displayName}}</strong>
        <small>{{Customer.department}}</small>
    </h1>
    <p class="profile-address">
        <i class="fa fa-map-marker"></i>
        {{#if location}}
            <span>{{location.displayName}}</span>
        {{else}}
            <!--<a class="addLocation" href="#">-->
                <!--<em>Click here to add an address </em>-->
            <!--</a>-->
        {{/if}}
    </p>

    <div class="profile-btns">
        {{#if firstCellPhone }}
        <a class="btn btn-default btn-custom-with-circle" href="#">
            <span class="btn-round"><i class="fa fa-phone"></i></span>
            <span>{{firstCellPhone}}</span>
        </a>
        {{/if}}
        {{#if firstEmail }}
        <a class="btn btn-default btn-custom-with-circle" href="#">
            <span class="btn-round"><i class="fa fa-envelope"></i></span>
            <span>{{firstEmail.value}}</span>
        </a>
        {{/if}}
    </div>
</template>

<template name="contact_header">
    {{#if pictureFileId}}
    {{else}}
        <div class="profile-pic">
            <div id="edit-pic" class="profile-pic-icon" title="Click to Edit" style="cursor: pointer">
                {{#if person}}
                    <i class="icon-contact-book-2"></i>
                {{/if}}
                {{#if organization}}
                    <i class="icon-buildings-1"></i>
                {{/if}}
            </div>
        </div>
    {{/if}}

    <h1 class="profile-name">
        <strong>{{displayName}}</strong>
        {{#if person}}
            <small>— {{person.jobTitle}}</small>
        {{/if}}

        <!--{{#if Contact.customerName}}-->
            <!--<a class="pull-right" href="/contactable/{{Contact.customer}}">-->
                <!--<i class="icon-buildings-1"></i>-->
                <!--{{Contact.customerName}}-->
            <!--</a>-->
        <!--{{else}}-->
            <!--<a class="pull-right editCustomer" href="#"> <i class="icon-buildings-1"></i></a>-->
        <!--{{/if}}-->
    </h1>
    <p class="profile-address">
        <i class="fa fa-map-marker"></i>
        {{#if location}}
            <span>{{location.displayName}}</span>
        {{else}}
            <a class="addLocation" href="#"><em class="text-muted"> Click here to add an address </em></a>
        {{/if}}
    </p>

    <div class="profile-btns">
        {{#if firstCellPhone }}
            <a class="btn btn-default btn-custom-with-circle" href="#">
                <span class="btn-round"><i class="fa fa-phone"></i></span>
                <span>{{firstCellPhone}}</span>
            </a>
        {{/if}}
        {{#if firstEmail }}
            <a class="btn btn-default btn-custom-with-circle" href="#">
                <span class="btn-round"><i class="fa fa-envelope"></i></span>
                <span>{{firstEmail.value}}</span>
            </a>
        {{/if}}
    </div>
</template>

<template name="employee_header">
    {{#if pictureFileId}}
    {{else}}
        <div class="profile-pic">
            <div id="edit-pic" class="profile-pic-icon" title="Click to Edit" style="cursor: pointer">
                {{#if person}}
                <i class="icon-profile-man"></i>
                {{/if}}
                {{#if organization}}
                <i class="icon-buildings-1"></i>
                {{/if}}
            </div>
        </div>
    {{/if}}

    <h1 class="profile-name">
        <strong>{{displayName}}</strong>
        {{#if person}}
            <small>— {{person.jobTitle}}</small>
        {{/if}}
        {{#if assignmentInfo}}
            <a class="pull-right" href="/job/{{assignmentInfo._id}}">
                <i class="icon icon-briefcase"> <span>{{assignmentInfo.displayName}}</span></i>
            </a>
        {{/if}}
    </h1>
    <p class="profile-address">

        {{#if location}}
            <i class="fa fa-map-marker"></i>
            <span>{{location.displayName}}</span>
        {{else}}
            <!--<em> Click here to add an address </em>-->
        {{/if}}

    </p>

    <div class="profile-btns">
        {{#if firstCellPhone }}
        <a class="btn btn-default btn-custom-with-circle" href="#">
            <span class="btn-round"><i class="fa fa-phone"></i></span>
            <span>{{firstCellPhone}}</span>
        </a>
        {{/if}}
        {{#if firstEmail }}
        <a class="btn btn-default btn-custom-with-circle" href="#">
            <span class="btn-round"><i class="fa fa-envelope"></i></span>
            <span>{{firstEmail.value}}</span>
        </a>
        {{/if}}
    </div>
</template>

<!-- Tabs -->

<template name="customer_tabs">
    <ul class="nav nav-tabs  contactable-nav-tabs-main bottom-20">
        <li class="active"><a href="#profile-notes" data-toggle="tab">Notes <span class="custom-badge-2">{{noteCount}}</span></a></li>
        <li><a href="#profile-documents" data-toggle="tab">Documents <span class="custom-badge-2">{{documentCount}}</span></a></li>
        <li><a href="#profile-jobs" data-toggle="tab">Jobs <span class="custom-badge-2">{{jobCount}}</span></a></li>
    </ul>

    <div class="tab-content">
        <!-- Notes Tab -->
        <div class="tab-pane active" id="profile-notes">
            {{> contactableNotesAdd entity=contactable type=getLinkType}}
            {{> contactableNotesList entity=contactable}}
        </div>
        <!-- Documents Tab -->
        <div class="tab-pane" id="profile-documents">
            {{> contactableDocumentsAdd entity=contactable collection="ContactablesFS"}}
            {{> contactableDocumentsList entity=contactable collection="ContactablesFS"}}
        </div><!-- /.profile-documents -->
        <div class="tab-pane" id="profile-jobs">
            {{>customerJobs}}
        </div><!-- /.profile-documents -->
    </div>
</template>
<template name="employee_tabs">
    <ul class="nav nav-tabs  contactable-nav-tabs-main bottom-20">
        <li class="active"><a href="#profile-notes" data-toggle="tab">Notes <span class="custom-badge-2">{{noteCount}}</span></a></li>
        <li><a href="#profile-documents" data-toggle="tab">Documents <span class="custom-badge-2">{{documentCount}}</span></a></li>
    </ul>

    <div class="tab-content">
        <!-- Notes Tab -->
        <div class="tab-pane active" id="profile-notes">
            {{> contactableNotesAdd entity=contactable type=getLinkType}}
            {{> contactableNotesList entity=contactable}}
        </div>
        <!-- Documents Tab -->
        <div class="tab-pane" id="profile-documents">
            {{> contactableDocumentsAdd entity=contactable collection="ContactablesFS"}}
            {{> contactableDocumentsList entity=contactable collection="ContactablesFS"}}
        </div><!-- /.profile-documents -->


    </div>
</template>

<template name="contact_tabs">
    <ul class="nav nav-tabs  contactable-nav-tabs-main bottom-20">
        <li class="active"><a href="#profile-notes" data-toggle="tab">Notes <span class="custom-badge-2">{{noteCount}}</span></a></li>
    </ul>

    <div class="tab-content">
        <!-- Notes Tab -->
        <div class="tab-pane active" id="profile-notes">
            {{> contactableNotesAdd entity=contactable type=getLinkType}}
            {{> contactableNotesList entity=contactable}}
        </div>
    </div>
</template>

<template name="loadingContactable">
    <div id="content">
        <div id="content-header" class="mini">
            <h1>Loading</h1>
        </div>
        <div id="breadcrumb">
            <a href="#" title="" class="tip-bottom" data-original-title="Go to Home"><i class="fa fa-home"></i> Home</a>
        </div>
        <div class="container-fluid">

            <div class="page-loader" style="height: 748px;">

            </div><!-- /.page-loader -->

        </div><!-- /.container-fluid -->

    </div>
</template>