<!-- Details view layout -->
<template name="contactable">
    <div id="content" class="details">
        {{#with contactable}}
            <div id="content-header" class="mini">
                <div class="profile-content-header">
                    {{>contactable_header}}
                </div>
            </div>
            <div class="container-fluid">
                <div class="row">
                    <div class="details-menu col-md-2">
                        {{>contactable_nav}}
                        {{>contactable_actions}}
                    </div>
                    <div class="details-view col-md-10">
                        <div class="details-view-content clearfix">
                            <div class="tab-pane active">
                                {{> UI.dynamic template=currentTemplate  data=. }}
                            </div>
                        </div>

                    </div>
                </div>
            </div>

        {{/with}}
    </div>
</template>

<!-- Headers -->

<template name="contactable_header">
    {{#if pictureFileId}}
        <div class="profile-pic">
            <div class="thumb thumb-md profile-pic-photo" style="cursor: pointer;">
                <a id="edit-pic" title="Click to Edit" class="pointer">
                    <img class="" src="{{pictureUrl}}" style="max-height: 40px;max-width: 40px;">
                </a>
            </div>
        </div>
    {{else}}
        <div class="profile-pic">
            <div id="edit-pic" class="profile-pic-icon" title="Click to Edit" style="cursor: pointer">
                {{#if person}}
                    <i class="icon-profile-business-man"></i>
                {{/if}}
                {{#if organization}}
                    <i class="icon-buildings-1"></i>
                {{/if}}
            </div>
        </div>
    {{/if}}
    <input id="edit-picture" style="visibility:hidden; display: none" name="files" type="file" class="fileUploader"/>


    <h1 class="profile-name">
        <strong>
            {{displayName}}

            {{#if person}}
                {{#if person.jobTitle}}
                    <small>â€” {{person.jobTitle}}</small>
                {{/if}}
            {{/if}}

            {{#if Contact.customerName}}
                <!--<br>-->
                <small>
                    <a href="/contactable/{{Contact.customer}}">
                        <strong class="text text-muted" style="font-size: 25px; color: #A29E9E">
                            {{Contact.customerName}}
                            <i class="fa fa-external-link" style="font-size: 14px"></i>
                        </strong>
                    </a>
                </small>
            {{/if}}

            {{#if Customer.department}}
                <small>{{Customer.department}}</small>
            {{/if}}
        </strong>
        <h5 class="pull-right" style="max-width: 40%;"> {{statusNote}} </h5>
    </h1>
    <p class="profile-address">

        {{#if location}}
            <i class="fa fa-map-marker"></i>
            <span>{{getLocationDisplayName}}</span>
        {{/if}}
    </p>

    <div class="profile-btns">
        {{#with mainContactMethods}}
            {{#if phone.value}}
                <a class="btn btn-default btn-custom-with-circle" href="callto:{{phone.value}}">
                    <span class="btn-round"><i class="fa fa-phone"></i></span>
                    {{phone.value}}
                </a>
            {{/if}}
            {{#if email.value}}
                <a class="btn btn-default btn-custom-with-circle" href="mailto:{{email.value}}">
                    <span class="btn-round"><i class="fa fa-envelope"></i></span>
                    {{email.value}}
                </a>
            {{/if}}
        {{/with}}
    </div>
</template>

<template name="contactable_notes">
    {{> notesTab}}
</template>

<template name="contactable_documents">

    {{> contactableDocumentsAdd entity=. collection="ContactablesFS"}}
    {{> contactableDocumentsList entity=. collection="ContactablesFS"}}
</template>

<template name="contactable_jobs">
    {{> jobsBox}}
</template>

<template name="contactable_contacts">
    {{> contactableContactsBox}}
</template>

<template name="contactable_tasks">
    {{> tasksBox}}
</template>

<template name="contactable_details">
    <row>
        <div class="col-md-6">
            {{> contactableDetailBox}}

            {{> contactableContactMethodsBox}}

            {{#if Contact}}
                {{> contactCustomerInfo customer=Contact.customer path='Contact.customer' collection=collection}}
            {{/if}}
        </div>
        <div class="col-md-6">

            {{> contactable_contacts}}
            {{>tagsBox}}
            {{>hotListMembershipsBox}}
            {{>addressList}}
        </div>
    </row>
</template>
<template name="hotListMembershipsBox">
    <div class="box">
        <div class="box-header-2">
            <a class="btn-action editHotList pull-right" href="#" style="color: {{colorEdit}}" title="Edit"><i
                    class="fa fa-pencil"></i></a>


            <div class="box-title">HotList Memberships</div>
        </div>
        <div class="box-content-md">
            <div class="panel-body no-padding">
                <div class="row">
                    {{#with recentHotList}}
                        <button type="button" class="btn btn-success addHotList" title="Add">
                            <span class="fa fa-plus"></span> Add: {{hotListDisplayName}} ({{hotListId}})
                        </button>
                    {{/with}}
                </div>
                <ul class="list-3 stripped">
                    {{#each hotListMemberships}}
                        <li>
                            <!-- Name -->
                            <div class="col-xs-12 no-padding">
                                <a href="/hotlist/{{_id}}">
                                    <strong>
                                        <span class="badge">{{displayName}}</span>
                                    </strong>
                                </a>
                                <span class="task-author text-center">{{_id}}</span>
                                <button class="btn btn-xs btn-default removeHotList"><i class="fa fa-times"></i> remove
                                </button>
                            </div>
                        </li>
                    {{/each}}
                </ul>
            </div>
        </div>
    </div>
</template>

<template name="contactable_HRConcourse">
    {{>HRConcourse entity=.}}
    {{>contactablePlacementsBox}}
</template>

<template name="contactable_placements">
    {{> placementsBox}}
</template>

<template name="contactable_actions">
    <div class="hidden-xs hidden-sm">
        <div class="details-actions row">
            <ul class="no-padding">
                {{#unless Employee}}
                    {{#if Contact}}
                        <li>
                            <a id="makeEmployee" class="btn btn-default btn-custom-with-circle action-btn">
                                <span class="btn-round"><i class="fa fa-exchange"></i></span>
                                <span style="white-space: normal;"> Add also as an employee</span>
                            </a>
                        </li>
                    {{/if}}
                {{/unless}}
                {{#unless Contact}}
                    {{#if Employee}}
                        <li>
                            <a id="makeContact" class="btn btn-default btn-custom-with-circle action-btn">
                                <span class="btn-round"><i class="fa fa-exchange"></i></span>
                                <span style="white-space: normal;">Add also as a contact</span>
                            </a>
                        </li>
                    {{/if}}
                {{/unless}}
                {{#if Employee}}
                    <li>
                        <a id="generate-resume" class="btn btn-default btn-custom-with-circle action-btn">
                            <span class="btn-round"><i class="fa fa-file"></i></span>
                            Build resume/cv
                        </a>
                        <a id="download-generated-resume" target="_blank"
                           download="{{person.firstName}}-{{person.lastName}}-Resume.pdf" style="display: none"></a>
                    </li>
                {{/if}}

                <li>
                    {{#if hasEmailAddress}}
                        {{>sendTemplate emailTemplateContext}}
                    {{/if}}
                </li>
            </ul>
        </div>
    </div>
    <div class="visible-xs visible-sm pull-right">
        <div class="details-actions">
            <div class="btn-group nav-item">
                <a type="button" class="btn dropdown-toggle" data-toggle="dropdown">
                    Act
                </a>
                <ul class="dropdown-menu pull-right" role="menu">
                    {{#unless Employee}}
                        {{#if Contact}}
                            <li>
                                <a id="makeEmployee">
                                    <span><i class="fa fa-exchange"></i></span>
                                    Make Employee
                                </a>
                            </li>
                        {{/if}}
                    {{/unless}}
                    {{#unless Contact}}
                        {{#if Employee}}
                            <li>
                                <a id="makeContact">
                                    <span><i class="fa fa-exchange"></i></span>
                                    Make Contact
                                </a>
                            </li>
                        {{/if}}
                    {{/unless}}
                    {{#if Employee}}
                        <li>
                            <a id="generate-resume">
                                <span><i class="fa fa-file"></i></span>
                                Generate resume
                                <a id="download-generated-resume" target="_blank"
                                   download="{{person.firstName}}-{{person.lastName}}-Resume.pdf"
                                   style="display: none"></a>
                            </a>
                        </li>
                    {{/if}}
                </ul>
            </div>
        </div>
    </div>
</template>

<template name="contactable_activities">
    {{> contactableActivities}}
</template>

<!-- Loading screen -->

<template name="loadingContactable">
    <div id="content">
        <div id="content-header" class="mini">
            <div class="profile-content-header">
                <h1>Loading</h1>
            </div>
        </div>
        <!--<div id="breadcrumb">-->
        <!--<a href="/" title="" class="tip-bottom" data-original-title="Go to Home"><i class="fa fa-home"></i> Home</a>-->
        <!--</div>-->
        <div class="container-fluid" style="background-color: #F6F6F6;">
            <div class="page-loader" style="height: 748px; background-color: #FFF;border: solid 1px #DFDFDF;">
            </div>
        </div>
    </div>
</template>


<template name="contactable_nav">
    {{> detailNav tabs=tabs route="contactable" entityId=_id}}
</template>

<template name="link">

</template>