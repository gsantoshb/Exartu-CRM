<template name="contactableDetailBox">
    <div class="box">
        <div class="box-header-2">
            <a class="btn-action pointer" title="Edit"><i id="edit-mode" class="fa fa-pencil"
                                                          style="color: {{editModeColor}}"></i></a>

            <div class="box-title">
                Details
            </div>
        </div>
        <div class="box-content-md">

            <table class="table box-table table-striped">
                <tbody>
                {{#with contactable }}
                    {{#if person }}
                        <tr>
                            <td>First Name</td>
                            <td>
                                {{#objectProperty property=firstName editable=editMode}}
                                    <input class="form-control" type="text" value="{{value}}">
                                {{else}}
                                    <span>{{value}}</span>
                                {{/objectProperty}}
                            </td>
                        </tr>
                        <tr>
                            <td>Last Name</td>
                            <td>
                                {{#objectProperty property=lastName editable=editMode}}
                                    <input class="form-control" type="text" value="{{value}}">
                                {{else}}
                                    <span>{{value}}</span>
                                {{/objectProperty}}
                            </td>
                        </tr>
                        <tr>
                            <td>MiddleName</td>
                            <td>
                                {{#objectProperty property=middleName editable=editMode}}
                                    <input class="form-control" type="text" value="{{value}}">
                                {{else}}
                                    <span>{{value}}</span>
                                {{/objectProperty}}
                            </td>
                        </tr>
                        <tr>
                            <td>Job title</td>
                            <td>
                                {{#objectProperty property=jobTitle editable=editMode}}
                                    <input class="form-control" type="text" value="{{value}}">
                                {{else}}
                                    <span>{{value}}</span>
                                {{/objectProperty}}
                            </td>
                        </tr>
                        <tr>
                            <td>Birth Date</td>
                            <td>
                                {{#objectProperty property=birthDate editable=editMode}}
                                    {{>bootstrap3DatePicker value=value options=datePickerOptions}}
                                {{else}}
                                    <strong>
                                        {{#if value}}
                                            {{#formattedDate value=value format='MMMM DD, YYYY'}}
                                                {{date}}
                                            {{/formattedDate}}
                                        {{else}}
                                            <!--Not set-->
                                        {{/if}}
                                    </strong>
                                {{/objectProperty}}
                            </td>
                        </tr>
                    {{/if}}

                    {{#if organization }}
                        <tr>
                            <td>Organization</td>
                            <td>
                                {{#objectProperty property=organizationName editable=editMode}}
                                    <input class="form-control" type="text" value="{{value}}">
                                {{else}}
                                    <span>{{value}}</span>
                                {{/objectProperty}}
                            </td>
                        </tr>
                    {{/if}}

                    {{#if Customer }}
                        <tr>
                            <td>Department</td>
                            <td>
                                {{#objectProperty property=department editable=editMode}}
                                    <input class="form-control" type="text" value="{{value}}">
                                {{else}}
                                    <span>{{value}}</span>
                                {{/objectProperty}}
                            </td>
                        </tr>
                    {{/if}}


                    <tr>
                        <td>Active Status</td>
                        <td>
                            {{#objectProperty property=activeStatus editable=editMode}}
                                {{> buttonGroup options=fetchOptions value=value onSelected=onSelectedStatus}}
                            {{else}}
                                <strong>
                                    <strong>{{displayName}}</strong>
                                </strong>
                            {{/objectProperty}}
                        </td>
                    </tr>
                    <tr>
                        <td>Process Status</td>
                        <td>
                            {{#objectProperty property=status editable=editMode}}
                                {{> buttonGroup options=fetchOptions value=value onSelected=onSelectedStatus}}
                            {{else}}
                                <strong>
                                    <strong>{{displayName}}</strong>
                                </strong>
                            {{/objectProperty}}
                        </td>
                    </tr>
                    <tr>
                        <td>Status note</td>
                        <td>
                            {{#objectProperty property=statusNote editable=editMode}}
                                <input class="form-control" type="text" value="{{value}}">
                            {{else}}
                                <span>{{value}}</span>
                            {{/objectProperty}}
                        </td>
                    </tr>
                    <tr>
                        <td>How heard of</td>
                        <td>
                            {{#objectProperty property=howHeardOf editable=editMode}}
                                {{> buttonGroup options=fetchOptions value=value onSelected=onSelectedStatus}}
                            {{else}}
                                <strong>
                                    <strong>{{displayName}}</strong>
                                </strong>
                            {{/objectProperty}}
                        </td>
                    </tr>

                    {{#if Employee }}
                        <tr>
                            <td>TaxID/SSN</td>
                            <td>
                                {{#objectProperty property=taxID editable=editMode}}
                                    {{> showTaxIdInput}}
                                {{else}}
                                    {{#if hideTaxID}}
                                        <a class="pointer showHideTaxId">Show</a>
                                    {{else}}
                                        {{#if value}}
                                            <!--<span id="taxid-text">{{value}}</span> <a class="pointer showHideTaxId">Hide</a>-->
                                            {{> showTaxIdText}}
                                        {{/if}}
                                    {{/if}}
                                {{/objectProperty}}
                            </td>
                        </tr>
                    {{/if}}
                    {{#if Customer}}
                        <tr>
                            <td>WorkerComp</td>
                            <td>
                                {{#objectProperty property=workerCompCode editable=editMode}}
                                    <input class="form-control" placeholder="Example: TX8810..." type="text"
                                           value="{{value}}">
                                {{else}}
                                    {{value}}
                                {{/objectProperty}}
                            </td>
                        </tr>
                    {{/if}}
                {{/with}}
                {{#with originalContactable}}
                    {{>displayOriginDataInline}}
                {{/with}}
                </tbody>
            </table>


        </div>
        {{#if editMode }}
            <div class="box-header-2">
                <a id="cancel-details" class="btn btn-default"> Cancel </a>
                <a id="save-details" class="btn btn-success pull-right"> Save </a>
            </div>
        {{/if}}
    </div>
</template>
<template name="displayOriginDataInline">
    <tr>
        <td>User</td>
        <td>
            {{displayUserName userId}}
        </td>
    </tr>
    <tr>
        <td>Date Created</td>
        <td>
            {{#formattedDate value=dateCreated format='lll'}}
                {{date}}
            {{/formattedDate}}
        </td>
    </tr>
    <tr>
        <td>Hierarchy</td>
        <td>
            {{displayHierName hierId}} ({{hierId}})
        </td>
    </tr>
    <tr>
        <td>ExternalId</td>
        <td>
            {{externalId}}
        </td>
    </tr>
</template>
<template name="showTaxIdText">
    <span id="taxid-text">{{value}}</span>
</template>

<template name="showTaxIdInput">
    <input id="taxid-input" class="form-control" type="text" value="{{value}}">
</template>
